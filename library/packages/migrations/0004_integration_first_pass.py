# ----------------------------------------------------------------------------
# Copyright (c) 2018-2022, QIIME 2 development team.
#
# Distributed under the terms of the Modified BSD License.
#
# The full license is in the file LICENSE, distributed with this software.
# ----------------------------------------------------------------------------

# Generated by Django 3.2.6 on 2021-08-26 18:26

from django.db import migrations, models
import django.db.models.deletion
import django.utils.timezone
import uuid


class Migration(migrations.Migration):

    dependencies = [
        ('packages', '0003_auto_20200908_1604'),
    ]

    operations = [
        migrations.CreateModel(
            name='Distro',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255)),
            ],
            options={
                'verbose_name': 'Distro',
            },
        ),
        migrations.CreateModel(
            name='DistroBuild',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('version', models.CharField(max_length=255)),
                ('github_run_id', models.CharField(max_length=100, verbose_name='Github Run ID')),
                ('linux_64', models.BooleanField(default=False, verbose_name='Linux 64 Package?')),
                ('osx_64', models.BooleanField(default=False, verbose_name='OSX 64 Package?')),
                ('pr_url', models.URLField(default='', verbose_name='PR URL')),
                ('distro', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='distro_builds', to='packages.distro')),
            ],
            options={
                'verbose_name': 'Distro Build',
            },
        ),
        migrations.CreateModel(
            name='Epoch',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('id', models.UUIDField(default=uuid.uuid4, editable=False, primary_key=True, serialize=False)),
                ('name', models.CharField(max_length=255, unique=True)),
                ('is_dev', models.BooleanField(default=True, verbose_name='Is Dev?')),
                ('include_in_ci', models.BooleanField(default=False, verbose_name='Include In CI?')),
            ],
            options={
                'verbose_name': 'Epoch',
            },
        ),
        migrations.AlterModelOptions(
            name='packagebuild',
            options={'verbose_name': 'Package Build'},
        ),
        migrations.RemoveField(
            model_name='package',
            name='core',
        ),
        migrations.RemoveField(
            model_name='packagebuild',
            name='artifact_name',
        ),
        migrations.AddField(
            model_name='package',
            name='created_at',
            field=models.DateTimeField(auto_now_add=True, default=django.utils.timezone.now, verbose_name='Created At'),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='package',
            name='updated_at',
            field=models.DateTimeField(auto_now=True, verbose_name='Updated At'),
        ),
        migrations.AddField(
            model_name='packagebuild',
            name='build_target',
            field=models.CharField(default='<q2NA>', max_length=50, verbose_name='Build Target'),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='packagebuild',
            name='created_at',
            field=models.DateTimeField(auto_now_add=True, default=django.utils.timezone.now, verbose_name='Created At'),
            preserve_default=False,
        ),
        migrations.AddField(
            model_name='packagebuild',
            name='linux_64',
            field=models.BooleanField(default=False, verbose_name='Linux 64 Package?'),
        ),
        migrations.AddField(
            model_name='packagebuild',
            name='osx_64',
            field=models.BooleanField(default=False, verbose_name='OSX 64 Package?'),
        ),
        migrations.AddField(
            model_name='packagebuild',
            name='updated_at',
            field=models.DateTimeField(auto_now=True, verbose_name='Updated At'),
        ),
        migrations.AlterField(
            model_name='packagebuild',
            name='github_run_id',
            field=models.CharField(max_length=100, verbose_name='Github Run ID'),
        ),
        migrations.CreateModel(
            name='ThroughEpochDistro',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('distro', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='packages.distro')),
                ('epoch', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='packages.epoch')),
            ],
            options={
                'unique_together': {('epoch', 'distro')},
            },
        ),
        migrations.CreateModel(
            name='ThroughDistroPackage',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('distro', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='packages.distro')),
                ('package', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='packages.package')),
            ],
            options={
                'unique_together': {('distro', 'package')},
            },
        ),
        migrations.CreateModel(
            name='ThroughDistroBuildPackageBuild',
            fields=[
                ('created_at', models.DateTimeField(auto_now_add=True, verbose_name='Created At')),
                ('updated_at', models.DateTimeField(auto_now=True, verbose_name='Updated At')),
                ('id', models.BigAutoField(primary_key=True, serialize=False)),
                ('distro_build', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='packages.distrobuild')),
                ('package_build', models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, to='packages.packagebuild')),
            ],
            options={
                'unique_together': {('distro_build', 'package_build')},
            },
        ),
        migrations.AddField(
            model_name='epoch',
            name='distros',
            field=models.ManyToManyField(related_name='epochs', through='packages.ThroughEpochDistro', to='packages.Distro'),
        ),
        migrations.AddField(
            model_name='distrobuild',
            name='epoch',
            field=models.ForeignKey(on_delete=django.db.models.deletion.CASCADE, related_name='distro_builds', to='packages.epoch'),
        ),
        migrations.AddField(
            model_name='distrobuild',
            name='package_builds',
            field=models.ManyToManyField(related_name='distro_builds', through='packages.ThroughDistroBuildPackageBuild', to='packages.PackageBuild'),
        ),
        migrations.AddField(
            model_name='distro',
            name='packages',
            field=models.ManyToManyField(related_name='distros', through='packages.ThroughDistroPackage', to='packages.Package'),
        ),
        migrations.AddField(
            model_name='packagebuild',
            name='epoch',
            field=models.ForeignKey(null=True, on_delete=django.db.models.deletion.CASCADE, related_name='package_builds', to='packages.epoch'),
        ),
        migrations.AlterUniqueTogether(
            name='distrobuild',
            unique_together={('distro', 'pr_url', 'epoch')},
        ),
    ]
